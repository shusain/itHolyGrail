!function(){"use strict";function a(){function a(a){b.directive(a,function(){return{restrict:"C",require:"^holyGrail",link:function(b,c,d,e){e.addPanel(a,c)}}})}for(var c=["westBody","westHead","westFoot","eastBody","eastHead","eastFoot","mainBody","mainHead","mainFoot"],d=c.length-1;d>=0;d--){var e=c[d];a(e)}}var b=angular.module("itHolyGrail",["itDebugPanel"]).service("StyleSheetHandler",function(){var a={};return a.createStyleSheet=function(){if(document.styleSheets&&0!==document.getElementsByTagName("head").length){var a,b="generated",c=document.createElement("style");c.type="text/css",c.title=b,document.getElementsByTagName("head")[0].appendChild(c);for(var d=document.styleSheets.length-1;d>=0;d--)document.styleSheets[d].disabled||document.styleSheets[d].title==b&&(a=document.styleSheets[d]);return{mediaType:typeof a.media,styleSheet:a}}},a.findEnabledScreenStylesheet=function(){var a,b;if(document.styleSheets&&0!==document.getElementsByTagName("head").length&&document.styleSheets.length>0)for(var c=0;c<document.styleSheets.length;c++)if(!document.styleSheets[c].disabled){var d=document.styleSheets[c].media;if(b=typeof d,"string"==b?(""===d||-1!=d.indexOf("screen"))&&(a=document.styleSheets[c]):"object"==b&&(""===d.mediaText||-1!=d.mediaText.indexOf("screen"))&&(a=document.styleSheets[c]),"undefined"!=typeof a)return a}},a.createCSSSelector=function(b,c){var d=a.baseStyleSheet.styleSheet,e=a.baseStyleSheet.mediaType,f=0;if("string"==e){for(f=0;f<d.rules.length;f++)if(d.rules[f].selectorText&&d.rules[f].selectorText.toLowerCase()==b.toLowerCase())return void(d.rules[f].style.cssText=c);d.addRule(b,c)}else if("object"==e){for(f=0;f<d.cssRules.length;f++)if(d.cssRules[f].selectorText&&d.cssRules[f].selectorText.toLowerCase()==b.toLowerCase())return void(d.cssRules[f].style.cssText=c);d.insertRule(b+"{"+c+"}",d.cssRules.length)}},a.baseStyleSheet=a.createStyleSheet(),a}).directive("holyGrail",["$window","$timeout","StyleSheetHandler",function(a,b,c){var d=0,e=1,f=2,g=3;return{restrict:"E",scope:{layoutConfig:"="},controller:["$scope",function(a){a.panels={},this.addPanel=function(b,c){a.panels[b]=c}}],link:function(h,i){function j(a,b){_.forOwn(a,function(a,c,d){"width"==c?b[c]=m(d):angular.isArray(a)?(b[c]=[],_.forEach(a,function(a){b[c].push(n(a))})):angular.isString(a)?b[c]=n(a):angular.isObject(a)?(b[c]={},j(a,b[c])):b[c]=a})}function k(a,b){_.forOwn(a,function(a,c){"padding"==c?b.padding=a[d]+"px "+a[e]+"px "+a[f]+"px "+a[g]+"px":angular.isObject(a)?(b[c]={},k(a,b[c])):"boolean"==typeof a||(b[c]=a+"px")})}function l(a,b){j(a,b),console.log(b),x=y.mainCol,v=y.westCol,w=y.eastCol}function m(a){var b=n(a.width),c=n(a.minWidth),d=n(a.maxWidth);return c>b&&(b=c),b>d&&(b=d),Math.ceil(b)}function n(a){var b=parseInt(a);return-1!=a.indexOf("%")?b/100*i[0].offsetWidth:isNaN(b)?0:b}function o(){console.log("lc",h.layoutConfig),angular.extend(u,h.layoutConfig),l(z,y),r()}function p(a){return h.panels[a][0].style}function q(a,b){_.forEach(a,function(a){angular.extend(p(a),b)})}function r(){function a(a,b,c){a.show?b[c]=y.outsideBorder+a.height+a.padding[d]+a.padding[f]+y.insideBorder:a[c]=-(y.outsideBorder+a.height+a.padding[d]+a.padding[f])}function h(a,b,c){a[c]=y.outsideBorder+b.width+b.padding[g]+b.padding[e]+y.insideBorder}if(v){v.foot.width=v.width-v.foot.padding[g]-v.foot.padding[e],v.body.width=v.width-v.body.padding[g]-v.body.padding[e],v.head.width=v.width-v.head.padding[g]-v.head.padding[e],w.foot.width=w.width-w.foot.padding[g]-w.foot.padding[e],w.body.width=w.width-w.body.padding[g]-w.body.padding[e],w.head.width=w.width-w.head.padding[g]-w.head.padding[e],v.head.top=v.head.left=v.body.top=v.body.left=v.body.bottom=v.foot.left=v.foot.bottom=x.head.top=x.head.left=x.head.right=x.foot.bottom=x.foot.left=x.foot.right=x.body.top=x.body.right=x.body.bottom=x.body.left=w.head.top=w.head.right=w.body.right=w.body.top=w.body.bottom=w.foot.right=w.foot.bottom=y.outsideBorder,a(v.head,v.body,"top"),a(v.foot,v.body,"bottom"),v.show?(h(x.body,v.body,"left"),h(x.head,v.head,"left"),h(x.foot,v.foot,"left")):v.head.left=v.foot.left=v.body.left=-(y.outsideBorder+v.width),a(w.head,w.body,"top"),a(w.foot,w.body,"bottom"),w.show?(h(x.head,w.head,"right"),h(x.body,w.body,"right"),h(x.foot,w.foot,"right")):w.head.right=w.body.right=w.foot.right=-(y.outsideBorder+w.width),a(x.head,x.body,"top"),a(x.foot,x.body,"bottom");var i={};k(y,i),console.log("processed",i),q(["westHead"],i.westCol.head),q(["westBody"],i.westCol.body),q(["westFoot"],i.westCol.foot),q(["eastHead"],i.eastCol.head),q(["eastBody"],i.eastCol.body),q(["eastFoot"],i.eastCol.foot),q(["mainHead"],i.mainCol.head),q(["mainBody"],i.mainCol.body),q(["mainFoot"],i.mainCol.foot),b(function(){c.createCSSSelector(".head-row, .body-row, .foot-row","transition:"+z.transition+";")})}}var s={padding:["9px","9px","9px","9px"]},t={show:!0,height:"60px",padding:["9px","9px","9px","9px"]},u={westCol:{width:"20%",minWidth:"60px",maxWidth:"400px",show:!0,head:angular.copy(t),body:angular.copy(s),foot:angular.copy(t)},mainCol:{head:angular.copy(t),body:angular.copy(s),foot:angular.copy(t)},eastCol:{width:"20%",minWidth:"60px",maxWidth:"400px",show:!0,head:angular.copy(t),body:angular.copy(s),foot:angular.copy(t)},outsideBorder:"10px",insideBorder:"5px",transition:"all ease-in .1s"};angular.extend(u,h.layoutConfig);var v,w,x,y={},z=u;h.$watch("layoutConfig",o,!0),angular.element(a).bind("resize",o),angular.element(document).ready(o)}}}]);a()}(),angular.module("component-templates",["component/templates/testTemplate.tpl.html"]),angular.module("component/templates/testTemplate.tpl.html",[]).run(["$templateCache",function(a){a.put("component/templates/testTemplate.tpl.html","<div>testing</div>")}]);